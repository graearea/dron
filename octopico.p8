pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- octopico
-- dynamic charging 
-- start with 1 car, charge it
-- next night 2 cars
-- every failure hitler gets a sale 
-- move octopus to see what the
-- charge is and stop the charging
-- in time
function _init()
	octo=new_octo()
	time=0
	cars={}
	-- cars={new_car(2),new_car(3)}
end

function new_octo()
	return {
 	x=100,
 	y=0,
 	draw=function(self)
 	 palt(0,true)
 		spr(5,self.x,self.y)
 	end
	}
end

function _update()
	time=time+1 
	if btn(⬆️)then octo.y=octo.y-2end
	if btn(⬇️)then octo.y=octo.y+2end
	if btn(⬅️)then octo.x=octo.x-1end
	if btn(➡️)then octo.x=octo.x+1end
	spawn_cars()
	for car in all(cars) do
		car:park()
		car:leave()
	end
	charge_cars()
end

function _draw()
	 rectfill(0,0,128,128,1)
		print(time_str(),0,0,0)
	 palt(15,true)
	 palt(0,false)
	 draw_parking_spots()
		for car in all(cars) do
			car:draw()	
		end
		octo:draw()
end

function draw_parking_spots()
for i=1,16 do 
	spr(55,128-16,i*8)
	spr(56,128-8,i*8)
end
end

function charge_cars()
 for car in all(cars) do
 car:charge()
 end
end
function spawn_cars()
 if rnd(10)<1 then
  add(cars,new_car(#cars))
 end
end

function time_str()
	--time is 30/second
	secs= time/10
 return flr((secs/6)%24)..":"..flr(secs%6)..0
end
-->8
-- cars


function new_car(slot)
return {
 slot=slot,
	x=-16,
	y=slot*8,
	soc=rnd(30),
	colour=set_colour(),
	is_on_fire=false,
	draw=function(self)
	 pal(8,self.colour)
		spr(0,self.x,self.y)
		spr(1,self.x+8,self.y)
		if self.is_on_fire then
		pal(8,8)
			sp=flr(rnd(2))
			spr(17+sp,self.x,self.y)
			spr(17+sp,self.x+8,self.y)
		end
	end,
	park=function(self)
		if self.x< (128-16) then self.x=self.x+1 end
	end,
	charge=function(self)
	 self.soc=self.soc+1
	 if self.soc>100 then 
	 self.is_on_fire=true end	 
	end,
	complete=function(self)
	 if self.soc>80 then
	   self.leaving=true
	 end
	end,
	leaving=false,
	leave=function(self)
	 if leaving then
	  self.x=self.x+1
	  if self.x>130 then
		  score = score+self.soc
		  del(cars,self)
		 end
		end
	end
}
end
score=0

function set_colour()
col = flr(rnd(15))
	if col==1 then 
		return 3 
	else 
		return col 
	end
end

__gfx__
ffffffffffffffff00000000f0000000000888000002220000000000000000000000000000000000000000000000000000000000000000000000000000000000
ff8888888888ffff00000000ff000000008888800222222000000000000000000000000000000000000000000000000000000000000000000000000000000000
f00080008000ffff00000000ffffff0008008008022c2c2000000000000000000000000000000000000000000000000000000000000000000000000000000000
000880008000ffff00000000ffcffcf0000080000222222000000000000000000000000000000000000000000000000000000000000000000000000000000000
888888888888888f00000000ffffffff000080000022222e00000000000000000000000000000000000000000000000000000000000000000000000000000000
888888888888887f00000000fff00fff000080000220020000000000000000000000000000000000000000000000000000000000000000000000000000000000
888008888880088f00000000ffffffff000080002002020e00000000000000000000000000000000000000000000000000000000000000000000000000000000
fff00ffffff00fff00000000ffffffff00008000e00e002000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777007ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007ffff8fffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007fff888ffffff8fff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007ff88888ffff898ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007ff889888ff89988f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007f8899988ff899a8f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007f899a998f899a99f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007ff89a98fff89a98f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000171717171717171700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111100000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000711111111111111100000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000171717171717171700000000000000000000000000000000000000000000000000000000
__label__
00011111000100011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11011011010101011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
00011111010101011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
01111011010101011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
00011111000100011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117188888888881111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117000800080001117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110008800080001117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118888888888888887
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118888888888888887
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118880088888800881
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111710071717100717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117188888888881111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117000800080001117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110008800080001117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118888888888888887
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118888888888888887
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111118880088888800881
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111710071717100717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111117
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111717171717171717

__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000002020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
