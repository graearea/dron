pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function build_world()
 for y=0,127 do
   new_state[x]={}
  for x=0,127 do
   new_state[x][y]=nil
  end
 end
end

function _init()
end

function _update60()
 for y=0,127 do
  for x=0,127 do
   px=pget(x,y)
   local n_cnt=count_neighbours(x,y)
   local alive
   if (n_cnt==2) then 
    alive=true
   elseif (n_cnt==3) then 
    alive=(px!=0) 
   else 
    alive=false
   end
   new_state[x][y]=alive
  end
 end
end

function _draw()
 rectfill(0,0,128,128,0)
 for y=0,127 do
  for x=0,127 do
  if new_state[x][y] then
   pset(x,y,7)
  end
 end
end

function cell(x,y)
 return {
  age=1,
  live=function(self)
   
   printh("split" .. x .. y)
  end,
  
  draw=function(self)
   rectfill(x,y,x+2,y+2,7)
  end
 }
 
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
