pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
rocks ={}
 for i=1,10 do
 	add(rocks,rock_new())
 end
end

function _update()
	for r in all(rocks) do
	 if costatus(r.coroutine)!="dead" then
	 	r:update()
		else
			del(rocks,r)
	 	add(rocks,rock_new())
		end
	end
end

function _draw()
 cls(1)
	for r in all(rocks) do
		r:draw()
	end
end

-->8

function rock_new(xx, yy)

return {
	x = rnd(128),
	y = rnd(128)-128,
	coroutine = cocreate(function(self)
		 while self.y<128 do
		  self.y = self.y+3
		  yield()
		 end
	end),

	update=function(self)
	 coresume(self.coroutine, self)
	end,
	
 draw=	function(self)
		if costatus(self.coroutine)!= 'dead' then
	 	spr(1,self.x,self.y)
	 else
	 	print("it's dead")
	 end
	end
 }	
end



__gfx__
00000000099999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000099999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
